<div class="container mt-5">
  <h1 class="mb-5 text-center text-gradient fw-bold" style="background: linear-gradient(45deg, #4e54c8, #8f94fb); -webkit-background-clip: text; color: transparent;">
    Catálogo do Sábio
  </h1>

  <div class="row g-4 mb-5 justify-content-center">
    <div class="col-md-5 col-lg-4">
      <input
        type="search"
        class="form-control form-control-lg shadow-sm rounded-pill border-0"
        placeholder="🔍 Filtrar por autor"
        aria-label="Filtro por autor"
        [(ngModel)]="authorFilter"
        (input)="onAuthorChange(authorFilter)"
        style="background: #f3f6fd; transition: box-shadow 0.3s ease;"
        onfocus="this.style.boxShadow='0 0 10px #8f94fb'"
        onblur="this.style.boxShadow='none'"
      />
    </div>
    <div class="col-md-5 col-lg-4">
      <input
        type="search"
        class="form-control form-control-lg shadow-sm rounded-pill border-0"
        placeholder="🔍 Filtrar por gênero"
        aria-label="Filtro por gênero"
        [(ngModel)]="genreFilter"
        (input)="onGenreChange(genreFilter)"
        style="background: #f3f6fd; transition: box-shadow 0.3s ease;"
        onfocus="this.style.boxShadow='0 0 10px #8f94fb'"
        onblur="this.style.boxShadow='none'"
      />
    </div>
  </div>

  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-gradient" style="width: 4rem; height: 4rem; color: #4e54c8;" role="status" aria-hidden="true"></div>
    <div class="mt-3 fw-semibold text-gradient fs-5" style="background: linear-gradient(45deg, #4e54c8, #8f94fb); -webkit-background-clip: text; color: transparent;">
      Carregando...
    </div>
  </div>

  <div *ngIf="error" class="alert alert-danger text-center fw-semibold fs-5 rounded shadow-sm">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && books.length" class="table-responsive shadow rounded border border-1 border-primary-subtle">
    <table class="table table-hover glass align-middle mb-0">
      <thead class="table-primary">
        <tr>
          <th scope="col" class="fw-semibold">Título</th>
          <th scope="col" class="fw-semibold">Autor</th>
          <th scope="col" class="fw-semibold">Gênero</th>
          <th scope="col" class="fw-semibold text-center">Ano</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let book of books" role="row" class="align-middle" style="cursor: pointer; transition: background-color 0.3s;">
          <td>
            <a
              [routerLink]="['/books', book.id]"
              class="text-decoration-none fw-semibold text-gradient"
              style="background: linear-gradient(45deg, #4e54c8, #8f94fb); -webkit-background-clip: text; color: transparent;"
              >{{ book.title }}</a
            >
          </td>
          <td>{{ book.author }}</td>
          <td>{{ book.genre }}</td>
          <td class="text-center">{{ book.publishedYear }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && !error && !books.length" class="text-center text-muted fs-5 my-5 fst-italic">
    Nenhum livro encontrado.
  </div>

  <nav *ngIf="(totalElements > 0 && totalPages > 1) && !error" aria-label="Paginação" class="mt-4">
  <ul class="pagination justify-content-center gap-2">
    <li class="page-item" [class.disabled]="page === 0">
      <button
        class="page-link rounded-pill px-4 fw-semibold"
        aria-label="Página anterior"
        (click)="goToPage(page - 1)"
        [attr.disabled]="page === 0 ? true : null"
        style="background: #4e54c8; color: white; transition: background-color 0.3s;"
        (mouseenter)="this.style.background='#8f94fb'"
        (mouseleave)="this.style.background='#4e54c8'"
      >
        &laquo; Anterior
      </button>
    </li>

    <li class="page-item disabled" aria-current="page">
      <span class="page-link rounded-pill px-4" style="background: #f3f6fd; color: #4e54c8; font-weight: 600;">
        Página {{ page + 1 }} de {{ totalPages }}
      </span>
    </li>

    <li class="page-item" [class.disabled]="page + 1 >= totalPages">
      <button
        class="page-link rounded-pill px-4 fw-semibold"
        aria-label="Próxima página"
        (click)="goToPage(page + 1)"
        [attr.disabled]="page + 1 >= totalPages ? true : null"
        style="background: #4e54c8; color: white; transition: background-color 0.3s;"
        (mouseenter)="this.style.background='#8f94fb'"
        (mouseleave)="this.style.background='#4e54c8'"
      >
        Próximo &raquo;
      </button>
    </li>
  </ul>
</nav>
</div>
